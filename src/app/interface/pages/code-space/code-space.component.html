<div class="page-wrapper box-border flex flex-col gap-2">
    <div class="flex w-full gap-2">
        <div class="flex-shrink-0">
            <button
                id="create-new-tab"
                class="flex aspect-square h-[40px] items-center justify-center bg-dark-light p-2"
                (click)="this.createNewEditor()"
            >
                <div class="plus-icon">
                    <div class="line"></div>
                    <div class="line"></div>
                </div>
            </button>
        </div>
        <div class="flex-shrink-0">
            <button
                class="action-button flex aspect-square h-[40px] items-center justify-center"
                (click)="this.deleteAllEdditors()"
            >
                <div class="medium-icon">
                    <svg
                        class="text-gray-800 h-[28px] w-[28px] dark:text-white"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7.414A2 2 0 0 0 20.414 6L18 3.586A2 2 0 0 0 16.586 3H5Zm10 11a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7V5h8v2a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1Z"
                            clip-rule="evenodd"
                        />
                    </svg>
                </div>
            </button>
        </div>

        <!-- TAB LIST -->
        <div class="tab-list flex flex-1 gap-2">
            @for (codespace of this.codeEdditors(); track $index) {
                <button
                    class="flex w-max gap-2 bg-dark-light p-2"
                    [class]="
                        this.activeEdditor() === codespace.name
                            ? 'active-tab'
                            : ''
                    "
                    (click)="this.activeEdditor.set(codespace.name)"
                >
                    <div>
                        <p class="no-select text-dark-gray">
                            {{ codespace.name }}
                        </p>
                    </div>
                    <button
                        class="flex h-full items-center justify-center"
                        (click)="
                            $event.stopPropagation();
                            this.rremoveEdditor(codespace.name)
                        "
                    >
                        <div class="cross-icon">
                            <div class="line"></div>
                            <div class="line"></div>
                        </div>
                    </button>
                </button>
            }
        </div>
    </div>
    <div>
        <!-- EDDITORS, TRYING TO ADD ALL, FILTERING ON ONE ACTIVE TAB -->
        @for (codespace of this.codeEdditors(); track $index) {
            <app-console
                [consoleConfiguration]="codespace"
                [style.display]="
                    this.activeEdditor() === codespace.name
                        ? 'block'
                        : 'none'
                "
            ></app-console>
        }

        <!-- PLACEHOLDER IF THERE IS NO ACTIVE EDDITOR -->
        @if (
            this.codeEdditors().length === 0 || this.activeEdditor() === null
        ) {
            <div
                class="g-2 flex h-96 w-full flex-col items-center justify-center"
            >
                <p class="text-center text-3xl font-black text-gray">
                    Не обрано жодної консолі
                </p>
                <p class="text-center text-dark-gray">
                    @if (this.codeEdditors().length !== 0) {
                        натисніть на одну з відкритих вкладок зверху, чи
                        <br />
                    }
                    натисніть на кнопку
                    <span class="font-black text-gray"> + </span>
                    зверху, аби створити нову консоль
                </p>
            </div>
        }
    </div>
</div>
