<div class="wrapper">
    <div class="p-2 lg:hidden">
        <button
            class="action-button flex aspect-square h-[40px] items-center justify-center"
            (click)="this.closeWindow()"
        >
            <div class="medium-icon">
                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                    <path
                        fill-rule="evenodd"
                        d="M8,16 C12.4183,16 16,12.4183 16,8 C16,3.58172 12.4183,0 8,0 C3.58172,0 0,3.58172 0,8 C0,12.4183 3.58172,16 8,16 Z M4.29289,4.29289 C4.68342,3.90237 5.31658,3.90237 5.70711,4.29289 L8,6.58579 L10.2929,4.29289 C10.6834,3.90237 11.3166,3.90237 11.7071,4.29289 C12.0976,4.68342 12.0976,5.31658 11.7071,5.70711 L9.41421,8 L11.7071,10.2929 C12.0976,10.6834 12.0976,11.3166 11.7071,11.7071 C11.3166,12.0976 10.6834,12.0976 10.2929,11.7071 L8,9.41421 L5.70711,11.7071 C5.31658,12.0976 4.68342,12.0976 4.29289,11.7071 C3.90237,11.3166 3.90237,10.6834 4.29289,10.2929 L6.58579,8 L4.29289,5.70711 C3.90237,5.31658 3.90237,4.68342 4.29289,4.29289 Z"
                    />
                </svg>
            </div>
        </button>
    </div>
    <div class="comments flex flex-col gap-2 w-full h-full overflow-y-auto">
        @for (comment of this.comments(); track $index) {
            <div class="flex w-full gap-2 bg-dark p-4">
                <div class="user-info w-4">
                    <app-user-badge [userId]="comment.userId"></app-user-badge>
                </div>
                <div class="comment-text">
                    {{ comment.text }}
                </div>
            </div>
        }
        @if (this.comments().length < 1 && this.loadingStatus === "resolved") {
            <div class="flex w-full h-full items-center justify-center">
                <p class="text-center text-gray">Ніхто ще не залишив коментаря до цього уроку</p>
            </div>
        }
    </div>
    <div class="actions">
        <textarea
            [(ngModel)]="newComment"
            placeholder="поділіться своїми думками..."
            rows="2"
        ></textarea>
        <button (click)="this.postNewComment()">Post</button>
    </div>

    <div class="toggle-btn">
        <button
            class="action-button flex aspect-square h-[40px] items-center justify-center"
            (click)="this.closeWindow()"
        >
            <div class="medium-icon">
                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                    <path
                        fill-rule="evenodd"
                        d="M8,16 C12.4183,16 16,12.4183 16,8 C16,3.58172 12.4183,0 8,0 C3.58172,0 0,3.58172 0,8 C0,12.4183 3.58172,16 8,16 Z M4.29289,4.29289 C4.68342,3.90237 5.31658,3.90237 5.70711,4.29289 L8,6.58579 L10.2929,4.29289 C10.6834,3.90237 11.3166,3.90237 11.7071,4.29289 C12.0976,4.68342 12.0976,5.31658 11.7071,5.70711 L9.41421,8 L11.7071,10.2929 C12.0976,10.6834 12.0976,11.3166 11.7071,11.7071 C11.3166,12.0976 10.6834,12.0976 10.2929,11.7071 L8,9.41421 L5.70711,11.7071 C5.31658,12.0976 4.68342,12.0976 4.29289,11.7071 C3.90237,11.3166 3.90237,10.6834 4.29289,10.2929 L6.58579,8 L4.29289,5.70711 C3.90237,5.31658 3.90237,4.68342 4.29289,4.29289 Z"
                    />
                </svg>
            </div>
        </button>
    </div>
</div>
